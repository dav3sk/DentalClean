<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:decorate xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:f="http://java.sun.com/jsf/core"
             xmlns:h="http://java.sun.com/jsf/html"
             template="template.xhtml"
             xmlns:p="http://primefaces.org/ui">

    <ui:define name="content">
        <!-- main content start-->
        <div id="page-wrapper">
            <div class="main-page">
                <div class="forms">
                    <div class="form-grids row widget-shadow" data-example-id="basic-forms">
                        <div class="form-body">
                            <div id="cadastro">
                                <h:form>
                                    <h2 class="tittle">CADASTRO DE AGENDAMENTO</h2>
                                    <p:outputLabel for="dentistalist" value="Selecione um dentista:" />
                                    <p:dataTable id="dentistalist" var="item" value="#{dentistaConsulta.items}"
                                                 rowKey="#{item.id}"
                                                 selection="#{agendamentoCadastro.dentista}" selectionMode="single"
                                                 emptyMessage="Não foi encontrado nenhum dado na tabela"
                                                 rowStyleClass="coluna"
                                                 paginator="true" rows="5"
                                                 >

                                        <p:column headerText="Nome" filterBy="#{item.nome}">
                                            <h:outputText value="#{item.nome}" />
                                        </p:column>
                                    </p:dataTable>

                                    <p:outputLabel for="clientelist" value="Selecione um cliente:" />
                                    <p:dataTable id="clientelist" var="item" value="#{clienteConsulta.items}"
                                                 rowKey="#{item.id}"
                                                 selection="#{agendamentoCadastro.cliente}" selectionMode="single"
                                                 emptyMessage="Não foi encontrado nenhum dado na tabela"
                                                 rowStyleClass="coluna"
                                                 paginator="true" rows="5"
                                                 >

                                        <p:column headerText="Nome" filterBy="#{item.nome}">
                                            <h:outputText value="#{item.nome}" />
                                        </p:column>
                                    </p:dataTable>

                                    <p:outputLabel for="dataHorario" value="Time:" />
                                    <p:calendar id="dataHorario" value="#{agendamentoCadastro.selected.data}" pattern="dd/MM/yyyy HH:mm">
                                        <f:validateRequired/>
                                    </p:calendar>
                                    
                                    <div>
                                        <h:commandLink styleClass="botao botaoAzul" type="button" action="#{agendamentoCadastro.create}" value="Agendar"/>
                                    </div>

                                </h:form>
                                
                                <div>
                                    <p:dataTable id="agendamentos" var="item" value="#{agendamentoCadastro.agendamentoItems}"
                                                 rowKey="#{item.id}"
                                                 emptyMessage="Não foi encontrado nenhum dado na tabela"
                                                 rowStyleClass="coluna"
                                                 >

                                        <p:column headerText="Dentista">
                                            <h:outputText value="#{item.dentista.nome}"/>
                                        </p:column>
                                        
                                        <p:column headerText="Cliente">
                                            <h:outputText value="#{item.cliente.nome}" />
                                        </p:column>
                                        
                                        <p:column headerText="Data">
                                            <h:outputText value="#{item.data}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText>
                                        </p:column>
                                        
                                        <p:column headerText="Horário">
                                            <h:outputText value="#{item.horario}">
                                                <f:convertDateTime timeZone="GMT-3" type="time"/>
                                            </h:outputText>
                                        </p:column>
                                    </p:dataTable>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ui:define>
</ui:decorate>